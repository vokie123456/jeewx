function getzIndex(a){var c,b=getCookie("ZINDEXNUMBER");return null==b?(setCookie("ZINDEXNUMBER",1980),b=1980):(c=a?b:parseInt(b)+parseInt(10),setCookie("ZINDEXNUMBER",c)),b}function upload(){upload()}function add(a,b,c,d,e){gridname=c,createwindow(a,b,d,e)}function addTreeNode(a,b,c){""!=rowid&&(b+="&id="+rowid),gridname=c,createwindow(a,b)}function update(a,b,c,d,e,f){gridname=c;var g=$("#"+c).datagrid("getSelections");return g&&0!=g.length?g.length>1?(tip("Please one item to edit"),void 0):(b+="undefined"!=f&&f?"/"+g[0].id:"&id="+g[0].id,createwindow(a,b,d,e),void 0):(tip("Please select edit item"),void 0)}function detail(a,b,c,d,e){var f=$("#"+c).datagrid("getSelections");return f&&0!=f.length?f.length>1?(tip("Please select an item to view"),void 0):(b+="&load=detail&id="+f[0].id,createdetailwindow(a,b,d,e),void 0):(tip("Please select view item"),void 0)}function deleteALLSelect(a,b,c){var d,e;gridname=c,d=[],e=$("#"+c).datagrid("getSelections"),e.length>0?($.dialog.setting.zIndex=getzIndex(!0),$.dialog.confirm("Do you want to delete this data for ever?",function(a){if(a){for(var f=0;f<e.length;f++)d.push(e[f].id);$.ajax({url:b,type:"post",data:{ids:d.join(",")},cache:!1,success:function(a){var e,b=$.parseJSON(a);b.success&&(e=b.msg,tip(e),reloadTable(),$("#"+c).datagrid("unselectAll"),d="")}})}})):tip("Please select delete data")}function createdetailwindow(a,b,c,d){c=c?c:700,d=d?d:400,("100%"==c||"100%"==d)&&(c=window.top.document.body.offsetWidth,d=window.top.document.body.offsetHeight-100),"undefined"==typeof windowapi?$.dialog({content:"url:"+b,zIndex:getzIndex(),lock:!0,width:c,height:d,title:a,opacity:.3,cache:!1,cancelVal:"Close",cancel:!0}):W.$.dialog({content:"url:"+b,zIndex:getzIndex(),lock:!0,width:c,height:d,parent:windowapi,title:a,opacity:.3,cache:!1,cancelVal:"Close",cancel:!0})}function editfs(a,b){var c=gridname;return""==rowid?(tip("Please select edit item"),void 0):(b+="&id="+rowid,openwindow(a,b,c,800,500),void 0)}function delObj(a,b){gridname=b,createdialog("Delete Confirm ","Delete this record, Confirm ?",a,b)}function confuploadify(a,b){$.dialog.setting.zIndex=getzIndex(!0),$.dialog.confirm("Delete confirm",function(){deluploadify(a,b)},function(){})}function deluploadify(a,b){$.ajax({async:!1,cache:!1,type:"POST",url:a,error:function(){},success:function(a){var c=$.parseJSON(a);c.success&&($("#"+b).remove(),m.remove(b))}})}function confirm(a,b,c){createdialog("Tip Message ",b,a,c)}function tip_old(a){$.dialog.setting.zIndex=getzIndex(!0),$.dialog.tips(a,1)}function tip(a){try{$.dialog.setting.zIndex=getzIndex(!0),$.messager.show({title:"Tip Message",msg:a,timeout:6e3})}catch(b){alertTipTop(a,"10%")}}function alertTipTop(a,b,c){$.dialog.setting.zIndex=getzIndex(!0),c=c?c:"Tip Message",$.dialog({title:c,zIndex:getzIndex(),icon:"tips.gif",top:b,content:a})}function alertTip(a,b){$.dialog.setting.zIndex=getzIndex(!0),b=b?b:"Tip Message",$.dialog({title:b,zIndex:getzIndex(),icon:"tips.gif",content:a})}function createwindow(a,b,c,d){c=c?c:700,d=d?d:400,("100%"==c||"100%"==d)&&(c=window.top.document.body.offsetWidth,d=window.top.document.body.offsetHeight-100),"undefined"==typeof windowapi?$.dialog({content:"url:"+b,lock:!0,zIndex:getzIndex(),width:c,height:d,title:a,opacity:.3,cache:!1,okVal:"Submit",ok:function(){return iframe=this.iframe.contentWindow,saveObj(),!1},cancelVal:"Close",cancel:!0}):W.$.dialog({content:"url:"+b,lock:!0,width:c,zIndex:getzIndex(),height:d,parent:windowapi,title:a,opacity:.3,cache:!1,ok:function(){return iframe=this.iframe.contentWindow,saveObj(),!1},cancelVal:"Close",cancel:!0})}function openuploadwin(a,b,c){gridname=c,$.dialog({content:"url:"+b,zIndex:getzIndex(),cache:!1,button:[{name:"Begin Upload",callback:function(){return iframe=this.iframe.contentWindow,iframe.upload(),!1},focus:!0},{name:"Cancel Upload",callback:function(){iframe=this.iframe.contentWindow,iframe.cancel()}}]})}function opensearchdwin(a,b,c,d){$.dialog({content:"url:"+b,zIndex:getzIndex(),title:a,lock:!0,height:d,cache:!1,width:c,opacity:.3,button:[{name:"Query",callback:function(){iframe=this.iframe.contentWindow,iframe.searchs()},focus:!0},{name:"Cancel",callback:function(){}}]})}function openwindow(a,b,c,d,e){gridname=c,"undefined"==typeof d&&"undefined"!=typeof e&&("undefined"==typeof windowapi?$.dialog({content:"url:"+b,zIndex:getzIndex(),title:a,cache:!1,lock:!0,width:"auto",height:e}):$.dialog({content:"url:"+b,zIndex:getzIndex(),title:a,cache:!1,parent:windowapi,lock:!0,width:"auto",height:e})),"undefined"==typeof e&&"undefined"!=typeof d&&("undefined"==typeof windowapi?$.dialog({content:"url:"+b,zIndex:getzIndex(),title:a,lock:!0,width:d,cache:!1,height:"auto"}):$.dialog({content:"url:"+b,zIndex:getzIndex(),title:a,lock:!0,parent:windowapi,width:d,cache:!1,height:"auto"})),"undefined"==typeof d&&"undefined"==typeof e&&("undefined"==typeof windowapi?$.dialog({content:"url:"+b,zIndex:getzIndex(),title:a,lock:!0,width:"auto",cache:!1,height:"auto"}):$.dialog({content:"url:"+b,zIndex:getzIndex(),title:a,lock:!0,parent:windowapi,width:"auto",cache:!1,height:"auto"})),"undefined"!=typeof d&&"undefined"!=typeof e&&("undefined"==typeof windowapi?$.dialog({width:d,height:e,content:"url:"+b,zIndex:getzIndex(),title:a,cache:!1,lock:!0}):$.dialog({width:d,height:e,content:"url:"+b,zIndex:getzIndex(),parent:windowapi,title:a,cache:!1,lock:!0}))}function createdialog(a,b,c,d){$.dialog.setting.zIndex=getzIndex(!0),$.dialog.confirm(b,function(){doSubmit(c,d),rowid=""},function(){})}function saveObj(){$("#btn_sub",iframe.document).click()}function ajaxSubForm(a){$("#myform",iframe.document).form("submit",{url:a,onSubmit:function(){iframe.editor.sync()},success:function(){tip("Cancel"),reloadTable()}})}function search(){$("#btn_sub",iframe.document).click(),iframe.search()}function doSubmit(a,b,c){var d,e,f,g;if(gridname=b,d=c,!d&&(d=new Object,-1!=a.indexOf("&")))for(e=a.substr(a.indexOf("&")+1),a=a.substr(0,a.indexOf("&")),f=e.split("&"),g=0;g<f.length;g++)d[f[g].split("=")[0]]=f[g].split("=")[1];$.ajax({async:!1,cache:!1,type:"POST",data:d,url:a,error:function(){},success:function(a){var c,b=$.parseJSON(a);b.success&&(c=b.msg,tip(c),reloadTable())}})}function exit(a,b){$.dialog.setting.zIndex=getzIndex(!0),$.dialog.confirm(b,function(){window.location=a},function(){})}function ajaxdoSub(a,b){$("#"+b).form("submit",{url:a,onSubmit:function(){editor.sync()},success:function(){tip("Cancel")}})}function ajaxdoForm(a,b){$("#"+b).form("submit",{url:a,onSubmit:function(){},success:function(){tip("Cancel")}})}function opensubwin(a,b,c,d,e){$.dialog({content:"url:"+b,zIndex:getzIndex(),title:a,lock:!0,opacity:.3,button:[{name:d,callback:function(){return iframe=this.iframe.contentWindow,win=frameElement.api.opener,$("#btn_sub",iframe.document).click(),!1}},{name:e,callback:function(){}}]})}function openauditwin(a,b,c,d,e,f){$.dialog({content:"url:"+b,zIndex:getzIndex(),title:a,lock:!0,opacity:.3,button:[{name:d,callback:function(){return iframe=this.iframe.contentWindow,win=$.dialog.open.origin,$("#btn_sub",iframe.document).click(),!1}},{name:e,callback:function(){iframe=this.iframe.contentWindow,win=frameElement.api.opener,$("#formobj",iframe.document).form("submit",{url:c+"&code=exit",onSubmit:function(){$("#code").val("exit")},success:function(){$.dialog.tips("Cancel",2),win.location.reload()}})}},{name:f,callback:function(){}}]})}function getCookie(a){return document.cookie.length>0&&(c_start=document.cookie.indexOf(a+"="),-1!=c_start)?(c_start=c_start+a.length+1,c_end=document.cookie.indexOf(";",c_start),-1==c_end&&(c_end=document.cookie.length),unescape(document.cookie.substring(c_start,c_end))):""}function setCookie(a,b,c){var d=new Date;d.setDate(d.getDate()+c),document.cookie=a+"="+escape(b)+(null==c?"":";expires="+d.toGMTString())}function createTabId(a){var c,b="";for(c=0;c<a.length;c++)b+=a.charCodeAt(c).toString(16);return b}function addOneTab(a,b,c){var e,d=getCookie("JEECGINDEXSTYLE");"sliding"==d||"bootstrap"==d?window.location.href=b:"acele"==d||"ace"==d?(e="",e=createTabId(a),window.top.addTabs({id:e,title:a,close:!0,url:b})):"hplus"==d?(e="",e=createTabId(a),window.top.addTabs({id:e,title:a,close:!0,url:b})):(""==c&&(c="icon folder"),window.top.$.messager.progress({text:"Page loading...",interval:300}),window.top.$("#maintabs").tabs({onClose:function(){window.top.$.messager.progress("close")}}),window.top.$("#maintabs").tabs("exists",a)?(window.top.$("#maintabs").tabs("select",a),-1!=b.indexOf("isHref")?window.top.$("#maintabs").tabs("update",{tab:window.top.$("#maintabs").tabs("getSelected"),options:{title:a,href:b,closable:!0,icon:c}}):window.top.$("#maintabs").tabs("update",{tab:window.top.$("#maintabs").tabs("getSelected"),options:{title:a,content:'<iframe src="'+b+'" frameborder="0" style="border:0;width:100%;height:99.4%;"></iframe>',closable:!0,icon:c}})):-1!=b.indexOf("isHref")?window.top.$("#maintabs").tabs("add",{title:a,href:b,closable:!0,icon:c}):window.top.$("#maintabs").tabs("add",{title:a,content:'<iframe src="'+b+'" frameborder="0" style="border:0;width:100%;height:99.4%;"></iframe>',closable:!0,icon:c}))}function closetab(a){window.top.$("#maintabs").tabs("close",a)}function inputClick(a,b,c){return $.dialog.setting.zIndex=getzIndex(!0),""==b||""==c?(alert("Popup parameter not prepare"),void 0):("undefined"==typeof windowapi?$.dialog({content:"url:cgReportController.do?popup&id="+c,zIndex:getzIndex(),lock:!0,title:"Select",width:800,height:400,cache:!1,ok:function(){var c,d;return iframe=this.iframe.contentWindow,c=iframe.getSelectRows(),""==c||null==c?(alert("Please select"),!1):(d="",$.each(c,function(a,c){d+=0==a?c[b]:","+c[b]}),$(a).val(""),$(a).val(d),!0)},cancelVal:"Close",cancel:!0}):$.dialog({content:"url:cgReportController.do?popup&id="+c,zIndex:getzIndex(),lock:!0,title:"Select",width:800,height:400,parent:windowapi,cache:!1,ok:function(){var c,d;return iframe=this.iframe.contentWindow,c=iframe.getSelectRows(),""==c||null==c?(alert("Please select"),!1):(d="",$.each(c,function(a,c){d+=0==a?c[b]:","+c[b]}),$(a).val(""),$(a).val(d),!0)},cancelVal:"Close",cancel:!0}),void 0)}function popClick(a,b,c){var d,e;$.dialog.setting.zIndex=getzIndex(!0),d=b.split(","),e=a.split(","),"undefined"==typeof windowapi?$.dialog({content:"url:"+c,zIndex:getzIndex(),lock:!0,title:"Select",width:700,height:400,cache:!1,ok:function(){var a,b,c;if(iframe=this.iframe.contentWindow,a=iframe.getSelectRows(),""==a||null==a)return alert("Please select"),!1;for(b=0;b<d.length;b++)c="",$.each(a,function(a,e){0==a?c+=e[d[b]]:(c+=",",c+=e[d[b]])}),$("#"+e[b]).length>=1?($("#"+e[b]).val(""),$("#"+e[b]).val(c)):($("input[name='"+e[b]+"']").val(""),$("input[name='"+e[b]+"']").val(c));return!0},cancelVal:"Close",cancel:!0}):$.dialog({content:"url:"+c,zIndex:getzIndex(),lock:!0,title:"Select",width:700,height:400,parent:windowapi,cache:!1,ok:function(){var a,b,c;if(iframe=this.iframe.contentWindow,a=iframe.getSelectRows(),""==a||null==a)return alert("Please select"),!1;for(b=0;b<d.length;b++)c="",$.each(a,function(a,e){0==a?c+=e[d[b]]:(c+=",",c+=e[d[b]])}),$("#"+e[b]).length>=1?($("#"+e[b]).val(""),$("#"+e[b]).val(c)):($("[name='"+e[b]+"']").val(""),$("[name='"+e[b]+"']").val(c));return!0},cancelVal:"Close",cancel:!0})}function JeecgExcelExport(a,b){var d,e,c=$("#"+b).datagrid("options").queryParams;$("#"+b+"tb").find("*").each(function(){c[$(this).attr("name")]=$(this).val()}),d="&",$.each(c,function(a,b){d+="&"+a+"="+b}),e="&field=",$.each($("#"+b).datagrid("options").columns[0],function(a,b){"opt"!=b.field&&(e+=b.field+",")}),window.location.href=a+encodeURI(e+d)}function jeecgAutoParse(a){var b=[];return $.each(a.rows,function(a,c){b.push({data:c,result:c,value:c.id})}),b}function updateNotCreateWin(a,b,c,d){var e=$("#"+c).datagrid("getSelections");return e&&0!=e.length?e.length>1?(tip("Please one item to edit"),void 0):(b+="undefined"!=d&&d?"/"+e[0].id:"&id="+e[0].id,window.location.href=b,void 0):(tip("Please select edit item"),void 0)}function viewNotCreateWin(a,b,c,d){var e=$("#"+c).datagrid("getSelections");return e&&0!=e.length?e.length>1?(tip("Please one item to edit"),void 0):(b+="undefined"!=d&&d?"/"+e[0].id:"&id="+e[0].id,window.location.href=b,void 0):(tip("Please select edit item"),void 0)}var iframe,win,windowapi,W,gridname="";try{windowapi=frameElement.api,W=windowapi.opener}catch(e){}$(function(){-1!=location.href.indexOf("load=detail")&&$(":input").attr("disabled","true")});